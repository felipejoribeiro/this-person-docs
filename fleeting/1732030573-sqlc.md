---
id: 1732030573-sqlc
aliases:
  - sqlc
tags:
  - programming;
  - engineering;
---

# GoLang SQLC

[SQLC](https://github.com/sqlc-dev/sqlc) is a Go code generator that generates code from SQL queries. It's very fast and type safe. It's a great choice for large projects. Errors in SQL queries are caught in compile time. Only supports **PostgreSQL**, **MySQL** and **SQLite**. It supports other languages

## Installation

SQLC is available in all major distributions for fast installation. In macos you can use brew as follows:

```bash
brew install sqlc
```

And, in **Arch linux** you can install from default repositories as so:

```bash
sudo pacman -S sqlc
```

Other operating systems may need other approaches. You can verify your installation with `sqlc version` to know your installed version.

## SQLC revision on compile

SQLC revises your SQL code when generating code. So any query errors are found in compile time, avoiding problems further in the development cycle. It creates the types associated with your table as well, so changes in your `schema` will result in changes to your `struct`, which will be flagged by your `LSP` in your codbase. This is nice as it allows for a better transitino between schemas.

## Setup

For working with **SQLC**, first, define the **SQL queries** you want to make inside your code in `.sql` files inside a `querie/` directory. For example:

```sql
-- name: ListProfiles :many
SELECT * FROM profile
ORDER BY id
LIMIT $1 OFFSET $2;

-- name: UpdateProfile :one
UPDATE profile
SET
  full_name = $2,
  document_number = $3,
WHERE id = $1
RETURNING *;
```

Then, configure you **SQLC** with a `.yaml` file. You can use `sqlc init` which creates an empty file for you:

```yaml
version: "2"
cloud:
  organization: "myOrg"
  project: "myProj"
  hostname: "myProj.com"
sql:
  - engine: "postgresql"
    queries: "./db/querie"
    schema: "./db/migration"
    gen:
      go:
        package: "my_project"
        out: "./db/sqlc"
        sql_package: "database/sql"
        emit_json_tags: true
        emit_prepared_queries: false
        emit_interface: false
        emit_exact_table_names: true
```

Then you can execute `sqlc generate` to create code. In this case, it will output **[golang](1729684350-golang.md)** code to the `sqlc` directory. Here are some generated sample code:

```go
const updateProfile = `-- name: UpdateProfile :one
UPDATE profile
SET
  full_name = $2,
  document_number = $3,
WHERE id = $1
RETURNING id, full_name, document_number
`
type UpdateProfileParams struct {
	ID             int64         `json:"id"`
	FullName       string        `json:"full_name"`
	DocumentNumber string        `json:"document_number"`
}

func (q *Queries) UpdateProfile(ctx context.Context, arg UpdateProfileParams) (Profile, error) {
	row := q.db.QueryRowContext(ctx, updateProfile,
		arg.ID,
		arg.FullName,
		arg.DocumentNumber,
	)
	var i Profile
	err := row.Scan(
		&i.ID,
		&i.FullName,
		&i.DocumentNumber,
	)
	return i, err
}
```

So now you can call this code to execute the specified query inside your go code.
